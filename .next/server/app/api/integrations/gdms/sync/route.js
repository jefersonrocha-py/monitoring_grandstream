"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/integrations/gdms/sync/route";
exports.ids = ["app/api/integrations/gdms/sync/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&page=%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&page=%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_jeferson_oliveira_Documents_GitHub_monitoring_grandstream_app_api_integrations_gdms_sync_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/integrations/gdms/sync/route.ts */ \"(rsc)/./app/api/integrations/gdms/sync/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/integrations/gdms/sync/route\",\n        pathname: \"/api/integrations/gdms/sync\",\n        filename: \"route\",\n        bundlePath: \"app/api/integrations/gdms/sync/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\jeferson.oliveira\\\\Documents\\\\GitHub\\\\monitoring_grandstream\\\\app\\\\api\\\\integrations\\\\gdms\\\\sync\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_jeferson_oliveira_Documents_GitHub_monitoring_grandstream_app_api_integrations_gdms_sync_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/integrations/gdms/sync/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnRlZ3JhdGlvbnMlMkZnZG1zJTJGc3luYyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGaW50ZWdyYXRpb25zJTJGZ2RtcyUyRnN5bmMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZpbnRlZ3JhdGlvbnMlMkZnZG1zJTJGc3luYyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqZWZlcnNvbi5vbGl2ZWlyYSU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q21vbml0b3JpbmdfZ3JhbmRzdHJlYW0lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2plZmVyc29uLm9saXZlaXJhJTVDRG9jdW1lbnRzJTVDR2l0SHViJTVDbW9uaXRvcmluZ19ncmFuZHN0cmVhbSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDcUU7QUFDbEo7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbnRlbm5hX21hcHMvPzUxNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcamVmZXJzb24ub2xpdmVpcmFcXFxcRG9jdW1lbnRzXFxcXEdpdEh1YlxcXFxtb25pdG9yaW5nX2dyYW5kc3RyZWFtXFxcXGFwcFxcXFxhcGlcXFxcaW50ZWdyYXRpb25zXFxcXGdkbXNcXFxcc3luY1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW50ZWdyYXRpb25zL2dkbXMvc3luYy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludGVncmF0aW9ucy9nZG1zL3N5bmNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2ludGVncmF0aW9ucy9nZG1zL3N5bmMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxqZWZlcnNvbi5vbGl2ZWlyYVxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXG1vbml0b3JpbmdfZ3JhbmRzdHJlYW1cXFxcYXBwXFxcXGFwaVxcXFxpbnRlZ3JhdGlvbnNcXFxcZ2Rtc1xcXFxzeW5jXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbnRlZ3JhdGlvbnMvZ2Rtcy9zeW5jL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&page=%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/integrations/gdms/sync/route.ts":
/*!*************************************************!*\
  !*** ./app/api/integrations/gdms/sync/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _services_gdms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @services/gdms */ \"(rsc)/./services/gdms.ts\");\n// app/api/integrations/gdms/sync/route.ts\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\n/**\r\n * POST /api/integrations/gdms/sync\r\n * - modo full (sem query): descobre/insere/atualiza tudo\r\n * - modo status-only (?mode=status): atualiza apenas status/lastSyncAt (cron 5min)\r\n */ async function POST(req) {\n    try {\n        const { searchParams } = new URL(req.url);\n        const mode = searchParams.get(\"mode\");\n        const statusOnly = mode === \"status\";\n        const nets = await (0,_services_gdms__WEBPACK_IMPORTED_MODULE_2__.listNetworks)();\n        const now = new Date();\n        let created = 0, updated = 0, statusChanged = 0, totalFetched = 0;\n        const perNetwork = [];\n        const errors = [];\n        for (const n of nets){\n            const aps = await (0,_services_gdms__WEBPACK_IMPORTED_MODULE_2__.listAPsByNetwork)(n.id, n.networkName ?? \"\");\n            perNetwork.push({\n                id: n.id,\n                name: n.networkName ?? \"\",\n                fetched: aps.length\n            });\n            totalFetched += aps.length;\n            for (const ap of aps){\n                try {\n                    const existing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.antenna.findFirst({\n                        where: {\n                            gdmsApId: ap.apId\n                        },\n                        select: {\n                            id: true,\n                            status: true,\n                            lat: true,\n                            lon: true\n                        }\n                    });\n                    if (statusOnly) {\n                        if (!existing) continue;\n                        const need = existing.status !== ap.status;\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.antenna.update({\n                            where: {\n                                gdmsApId: ap.apId\n                            },\n                            data: {\n                                status: ap.status,\n                                lastSyncAt: now\n                            }\n                        });\n                        updated++;\n                        if (need) {\n                            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.statusHistory.create({\n                                data: {\n                                    antennaId: existing.id,\n                                    status: ap.status\n                                }\n                            });\n                            statusChanged++;\n                        }\n                        continue;\n                    }\n                    const base = {\n                        name: ap.apName,\n                        networkId: ap.networkId,\n                        networkName: ap.networkName,\n                        status: ap.status,\n                        lastSyncAt: now\n                    };\n                    if (existing && existing.lat === 0 && existing.lon === 0) {\n                        if (typeof ap.lat === \"number\") base.lat = ap.lat;\n                        if (typeof ap.lng === \"number\") base.lon = ap.lng;\n                    }\n                    if (!existing) {\n                        const createdRow = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.antenna.create({\n                            data: {\n                                gdmsApId: ap.apId,\n                                ...base,\n                                lat: typeof base.lat === \"number\" ? base.lat : 0,\n                                lon: typeof base.lon === \"number\" ? base.lon : 0\n                            }\n                        });\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.statusHistory.create({\n                            data: {\n                                antennaId: createdRow.id,\n                                status: ap.status\n                            }\n                        });\n                        created++;\n                    } else {\n                        const need = existing.status !== ap.status;\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.antenna.update({\n                            where: {\n                                gdmsApId: ap.apId\n                            },\n                            data: base\n                        });\n                        if (need) {\n                            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.statusHistory.create({\n                                data: {\n                                    antennaId: existing.id,\n                                    status: ap.status\n                                }\n                            });\n                            statusChanged++;\n                        }\n                        updated++;\n                    }\n                } catch (rowErr) {\n                    errors.push({\n                        apId: ap.apId,\n                        reason: rowErr?.message ?? String(rowErr)\n                    });\n                }\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: errors.length === 0,\n            mode: statusOnly ? \"status\" : \"full\",\n            networks: nets.length,\n            totalFetched,\n            created,\n            updated,\n            statusChanged,\n            perNetwork,\n            errors: errors.slice(0, 50),\n            at: now.toISOString()\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: e?.message ?? String(e)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ludGVncmF0aW9ucy9nZG1zL3N5bmMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMENBQTBDO0FBQ0M7QUFDTjtBQUMyQjtBQUV6RCxNQUFNSSxVQUFVLFNBQVM7QUFDekIsTUFBTUMsVUFBVSxnQkFBZ0I7QUFFdkM7Ozs7Q0FJQyxHQUNNLGVBQWVDLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsSUFBSUcsR0FBRztRQUN4QyxNQUFNQyxPQUFPSCxhQUFhSSxHQUFHLENBQUM7UUFDOUIsTUFBTUMsYUFBYUYsU0FBUztRQUU1QixNQUFNRyxPQUFPLE1BQU1aLDREQUFZQTtRQUMvQixNQUFNYSxNQUFNLElBQUlDO1FBRWhCLElBQUlDLFVBQVUsR0FBR0MsVUFBVSxHQUFHQyxnQkFBZ0IsR0FBR0MsZUFBZTtRQUNoRSxNQUFNQyxhQUFtRSxFQUFFO1FBQzNFLE1BQU1DLFNBQWtELEVBQUU7UUFFMUQsS0FBSyxNQUFNQyxLQUFLVCxLQUFNO1lBQ3BCLE1BQU1VLE1BQU0sTUFBTXJCLGdFQUFnQkEsQ0FBQ29CLEVBQUVFLEVBQUUsRUFBRUYsRUFBRUcsV0FBVyxJQUFJO1lBQzFETCxXQUFXTSxJQUFJLENBQUM7Z0JBQUVGLElBQUlGLEVBQUVFLEVBQUU7Z0JBQUVHLE1BQU1MLEVBQUVHLFdBQVcsSUFBSTtnQkFBSUcsU0FBU0wsSUFBSU0sTUFBTTtZQUFDO1lBQzNFVixnQkFBZ0JJLElBQUlNLE1BQU07WUFFMUIsS0FBSyxNQUFNQyxNQUFNUCxJQUFLO2dCQUNwQixJQUFJO29CQUNGLE1BQU1RLFdBQVcsTUFBTS9CLCtDQUFNQSxDQUFDZ0MsT0FBTyxDQUFDQyxTQUFTLENBQUM7d0JBQzlDQyxPQUFPOzRCQUFFQyxVQUFVTCxHQUFHTSxJQUFJO3dCQUFDO3dCQUMzQkMsUUFBUTs0QkFBRWIsSUFBSTs0QkFBTWMsUUFBUTs0QkFBTUMsS0FBSzs0QkFB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QVFBLE9BQU91QyxLQUFLLENBQUMsR0FBRztZQUN4QkMsSUFBSS9DLElBQUlnRCxXQUFXO1FBQ3JCO0lBQ0YsRUFBRSxPQUFPQyxHQUFRO1FBQ2YsT0FBT2hFLHFEQUFZQSxDQUFDMEQsSUFBSSxDQUFDO1lBQUVDLElBQUk7WUFBT00sT0FBT0QsR0FBR1IsV0FBV0MsT0FBT087UUFBRyxHQUFHO1lBQUV6QixRQUFRO1FBQUk7SUFDeEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FudGVubmFfbWFwcy8uL2FwcC9hcGkvaW50ZWdyYXRpb25zL2dkbXMvc3luYy9yb3V0ZS50cz81ZDk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9hcGkvaW50ZWdyYXRpb25zL2dkbXMvc3luYy9yb3V0ZS50c1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkBsaWIvcHJpc21hXCI7XHJcbmltcG9ydCB7IGxpc3ROZXR3b3JrcywgbGlzdEFQc0J5TmV0d29yayB9IGZyb20gXCJAc2VydmljZXMvZ2Rtc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xyXG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9pbnRlZ3JhdGlvbnMvZ2Rtcy9zeW5jXHJcbiAqIC0gbW9kbyBmdWxsIChzZW0gcXVlcnkpOiBkZXNjb2JyZS9pbnNlcmUvYXR1YWxpemEgdHVkb1xyXG4gKiAtIG1vZG8gc3RhdHVzLW9ubHkgKD9tb2RlPXN0YXR1cyk6IGF0dWFsaXphIGFwZW5hcyBzdGF0dXMvbGFzdFN5bmNBdCAoY3JvbiA1bWluKVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xyXG4gICAgY29uc3QgbW9kZSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJtb2RlXCIpO1xyXG4gICAgY29uc3Qgc3RhdHVzT25seSA9IG1vZGUgPT09IFwic3RhdHVzXCI7XHJcblxyXG4gICAgY29uc3QgbmV0cyA9IGF3YWl0IGxpc3ROZXR3b3JrcygpO1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICBsZXQgY3JlYXRlZCA9IDAsIHVwZGF0ZWQgPSAwLCBzdGF0dXNDaGFuZ2VkID0gMCwgdG90YWxGZXRjaGVkID0gMDtcclxuICAgIGNvbnN0IHBlck5ldHdvcms6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBmZXRjaGVkOiBudW1iZXIgfT4gPSBbXTtcclxuICAgIGNvbnN0IGVycm9yczogQXJyYXk8eyBhcElkOiBzdHJpbmc7IHJlYXNvbjogc3RyaW5nIH0+ID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBuIG9mIG5ldHMpIHtcclxuICAgICAgY29uc3QgYXBzID0gYXdhaXQgbGlzdEFQc0J5TmV0d29yayhuLmlkLCBuLm5ldHdvcmtOYW1lID8/IFwiXCIpO1xyXG4gICAgICBwZXJOZXR3b3JrLnB1c2goeyBpZDogbi5pZCwgbmFtZTogbi5uZXR3b3JrTmFtZSA/PyBcIlwiLCBmZXRjaGVkOiBhcHMubGVuZ3RoIH0pO1xyXG4gICAgICB0b3RhbEZldGNoZWQgKz0gYXBzLmxlbmd0aDtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgYXAgb2YgYXBzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLmFudGVubmEuZmluZEZpcnN0KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgZ2Rtc0FwSWQ6IGFwLmFwSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBzdGF0dXM6IHRydWUsIGxhdDogdHJ1ZSwgbG9uOiB0cnVlIH0sXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoc3RhdHVzT25seSkge1xyXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgbmVlZCA9IGV4aXN0aW5nLnN0YXR1cyAhPT0gYXAuc3RhdHVzO1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYW50ZW5uYS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgIHdoZXJlOiB7IGdkbXNBcElkOiBhcC5hcElkIH0sXHJcbiAgICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IGFwLnN0YXR1cywgbGFzdFN5bmNBdDogbm93IH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1cGRhdGVkKys7XHJcbiAgICAgICAgICAgIGlmIChuZWVkKSB7XHJcbiAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLnN0YXR1c0hpc3RvcnkuY3JlYXRlKHsgZGF0YTogeyBhbnRlbm5hSWQ6IGV4aXN0aW5nLmlkLCBzdGF0dXM6IGFwLnN0YXR1cyB9IH0pO1xyXG4gICAgICAgICAgICAgIHN0YXR1c0NoYW5nZWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCBiYXNlOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGFwLmFwTmFtZSxcclxuICAgICAgICAgICAgbmV0d29ya0lkOiBhcC5uZXR3b3JrSWQsXHJcbiAgICAgICAgICAgIG5ldHdvcmtOYW1lOiBhcC5uZXR3b3JrTmFtZSxcclxuICAgICAgICAgICAgc3RhdHVzOiBhcC5zdGF0dXMsXHJcbiAgICAgICAgICAgIGxhc3RTeW5jQXQ6IG5vdyxcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmxhdCA9PT0gMCAmJiBleGlzdGluZy5sb24gPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcC5sYXQgPT09IFwibnVtYmVyXCIpIGJhc2UubGF0ID0gYXAubGF0O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFwLmxuZyA9PT0gXCJudW1iZXJcIikgYmFzZS5sb24gPSBhcC5sbmc7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKCFleGlzdGluZykge1xyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVkUm93ID0gYXdhaXQgcHJpc21hLmFudGVubmEuY3JlYXRlKHtcclxuICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBnZG1zQXBJZDogYXAuYXBJZCxcclxuICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbiAgICAgICAgICAgICAgICBsYXQ6IHR5cGVvZiBiYXNlLmxhdCA9PT0gXCJudW1iZXJcIiA/IGJhc2UubGF0IDogMCxcclxuICAgICAgICAgICAgICAgIGxvbjogdHlwZW9mIGJhc2UubG9uID09PSBcIm51bWJlclwiID8gYmFzZS5sb24gOiAwLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuc3RhdHVzSGlzdG9yeS5jcmVhdGUoeyBkYXRhOiB7IGFudGVubmFJZDogY3JlYXRlZFJvdy5pZCwgc3RhdHVzOiBhcC5zdGF0dXMgfSB9KTtcclxuICAgICAgICAgICAgY3JlYXRlZCsrO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbmVlZCA9IGV4aXN0aW5nLnN0YXR1cyAhPT0gYXAuc3RhdHVzO1xyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuYW50ZW5uYS51cGRhdGUoeyB3aGVyZTogeyBnZG1zQXBJZDogYXAuYXBJZCB9LCBkYXRhOiBiYXNlIH0pO1xyXG4gICAgICAgICAgICBpZiAobmVlZCkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5zdGF0dXNIaXN0b3J5LmNyZWF0ZSh7IGRhdGE6IHsgYW50ZW5uYUlkOiBleGlzdGluZy5pZCwgc3RhdHVzOiBhcC5zdGF0dXMgfSB9KTtcclxuICAgICAgICAgICAgICBzdGF0dXNDaGFuZ2VkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlZCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKHJvd0VycjogYW55KSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaCh7IGFwSWQ6IGFwLmFwSWQsIHJlYXNvbjogcm93RXJyPy5tZXNzYWdlID8/IFN0cmluZyhyb3dFcnIpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIG9rOiBlcnJvcnMubGVuZ3RoID09PSAwLFxyXG4gICAgICBtb2RlOiBzdGF0dXNPbmx5ID8gXCJzdGF0dXNcIiA6IFwiZnVsbFwiLFxyXG4gICAgICBuZXR3b3JrczogbmV0cy5sZW5ndGgsXHJcbiAgICAgIHRvdGFsRmV0Y2hlZCwgY3JlYXRlZCwgdXBkYXRlZCwgc3RhdHVzQ2hhbmdlZCxcclxuICAgICAgcGVyTmV0d29yayxcclxuICAgICAgZXJyb3JzOiBlcnJvcnMuc2xpY2UoMCwgNTApLFxyXG4gICAgICBhdDogbm93LnRvSVNPU3RyaW5nKCksXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG9rOiBmYWxzZSwgZXJyb3I6IGU/Lm1lc3NhZ2UgPz8gU3RyaW5nKGUpIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJsaXN0TmV0d29ya3MiLCJsaXN0QVBzQnlOZXR3b3JrIiwicnVudGltZSIsImR5bmFtaWMiLCJQT1NUIiwicmVxIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwibW9kZSIsImdldCIsInN0YXR1c09ubHkiLCJuZXRzIiwibm93IiwiRGF0ZSIsImNyZWF0ZWQiLCJ1cGRhdGVkIiwic3RhdHVzQ2hhbmdlZCIsInRvdGFsRmV0Y2hlZCIsInBlck5ldHdvcmsiLCJlcnJvcnMiLCJuIiwiYXBzIiwiaWQiLCJuZXR3b3JrTmFtZSIsInB1c2giLCJuYW1lIiwiZmV0Y2hlZCIsImxlbmd0aCIsImFwIiwiZXhpc3RpbmciLCJhbnRlbm5hIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJnZG1zQXBJZCIsImFwSWQiLCJzZWxlY3QiLCJzdGF0dXMiLCJsYXQiLCJsb24iLCJuZWVkIiwidXBkYXRlIiwiZGF0YSIsImxhc3RTeW5jQXQiLCJzdGF0dXNIaXN0b3J5IiwiY3JlYXRlIiwiYW50ZW5uYUlkIiwiYmFzZSIsImFwTmFtZSIsIm5ldHdvcmtJZCIsImxuZyIsImNyZWF0ZWRSb3ciLCJyb3dFcnIiLCJyZWFzb24iLCJtZXNzYWdlIiwiU3RyaW5nIiwianNvbiIsIm9rIiwibmV0d29ya3MiLCJzbGljZSIsImF0IiwidG9JU09TdHJpbmciLCJlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/integrations/gdms/sync/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gdmsToken.ts":
/*!**************************!*\
  !*** ./lib/gdmsToken.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   forceRefresh: () => (/* binding */ forceRefresh),\n/* harmony export */   getAccessToken: () => (/* binding */ getAccessToken),\n/* harmony export */   getTokenInfo: () => (/* binding */ getTokenInfo),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n\nconst mem = {\n    token: null\n};\nconst SKEW_MS = 60000; // renova com 1min de antecedência\nfunction now() {\n    return Date.now();\n}\nfunction willExpireSoon(expiresAt, skewMs = SKEW_MS) {\n    return expiresAt <= now() + skewMs;\n}\nasync function loadFromDb() {\n    const row = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.gdmsToken.findUnique({\n        where: {\n            id: 1\n        }\n    }).catch(()=>null);\n    if (!row) return null;\n    return {\n        accessToken: row.accessToken,\n        expiresAt: new Date(row.expiresAt).getTime()\n    };\n}\nasync function saveToDb(tok) {\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.gdmsToken.upsert({\n        where: {\n            id: 1\n        },\n        create: {\n            id: 1,\n            accessToken: tok.accessToken,\n            expiresAt: new Date(tok.expiresAt)\n        },\n        update: {\n            accessToken: tok.accessToken,\n            expiresAt: new Date(tok.expiresAt)\n        }\n    });\n    mem.token = tok; // sincroniza cache\n}\n// === OAuth client_credentials ===\n// Equivalente ao seu curl:\n// curl -X POST \"$GDMS_OAUTH_URL\" \\\n//   -H \"Content-Type: application/x-www-form-urlencoded\" \\\n//   --data \"grant_type=client_credentials&client_id=...&client_secret=...\"\nasync function fetchClientCredentialsToken() {\n    const url = process.env.GDMS_OAUTH_URL;\n    const clientId = process.env.GDMS_CLIENT_ID;\n    const clientSecret = process.env.GDMS_CLIENT_SECRET;\n    if (!url || !clientId || !clientSecret) {\n        throw new Error(\"Configure GDMS_OAUTH_URL, GDMS_CLIENT_ID e GDMS_CLIENT_SECRET.\");\n    }\n    const body = new URLSearchParams();\n    body.set(\"grant_type\", \"client_credentials\");\n    body.set(\"client_id\", clientId);\n    body.set(\"client_secret\", clientSecret);\n    const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const t = await res.text();\n        throw new Error(`OAuth token failed ${res.status}: ${t}`);\n    }\n    const json = await res.json();\n    const accessToken = json?.access_token ?? json?.token;\n    const ttlSec = json?.expires_in ?? 3600;\n    if (!accessToken) throw new Error(\"OAuth token response missing access_token\");\n    return {\n        accessToken,\n        expiresAt: now() + ttlSec * 1000\n    };\n}\n// Renova e persiste\nasync function refreshToken() {\n    const rec = await fetchClientCredentialsToken();\n    await saveToDb(rec);\n    return rec;\n}\n// Exposta para quem precisa do token\nasync function getAccessToken() {\n    // 1) memória ok?\n    if (mem.token && !willExpireSoon(mem.token.expiresAt)) return mem.token.accessToken;\n    // 2) DB\n    const dbTok = await loadFromDb();\n    if (dbTok && !willExpireSoon(dbTok.expiresAt)) {\n        mem.token = dbTok;\n        return dbTok.accessToken;\n    }\n    // 3) renovar via OAuth e salvar\n    const newTok = await refreshToken();\n    return newTok.accessToken;\n}\n// Opcional: force refresh via endpoint/admin\nasync function forceRefresh() {\n    return refreshToken();\n}\n// Para UI/monitorar (não expõe o token)\nasync function getTokenInfo() {\n    const dbTok = await loadFromDb();\n    const exp = dbTok?.expiresAt ?? 0;\n    return {\n        hasToken: !!dbTok,\n        expiresAt: exp,\n        expiresInSec: exp ? Math.max(0, Math.floor((exp - now()) / 1000)) : null\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixJQUFJQyxLQUFLLENBQUNjLFdBQVc7SUFFbkYsUUFBUTtJQUNSLE1BQU1vQyxRQUFRLE1BQU0zQztJQUNwQixJQUFJMkMsU0FBUyxDQUFDOUMsZUFBZThDLE1BQU03QyxTQUFTLEdBQUc7UUFDN0NOLElBQUlDLEtBQUssR0FBR2tEO1FBQ1osT0FBT0EsTUFBTXBDLFdBQVc7SUFDMUI7SUFFQSxnQ0FBZ0M7SUFDaEMsTUFBTXFDLFNBQVMsTUFBTUo7SUFDckIsT0FBT0ksT0FBT3JDLFdBQVc7QUFDM0I7QUFFQSw2Q0FBNkM7QUFDdEMsZUFBZXNDO0lBQ3BCLE9BQU9MO0FBQ1Q7QUFFQSx3Q0FBd0M7QUFDakMsZUFBZU07SUFDcEIsTUFBTUgsUUFBUSxNQUFNM0M7SUFDcEIsTUFBTStDLE1BQU1KLE9BQU83QyxhQUFhO0lBQ2hDLE9BQU87UUFDTGtELFVBQVUsQ0FBQyxDQUFDTDtRQUNaN0MsV0FBV2lEO1FBQ1hFLGNBQWNGLE1BQU1HLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxLQUFLLENBQUMsQ0FBQ0wsTUFBTXBELEtBQUksSUFBSyxTQUFTO0lBQ3RFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbnRlbm5hX21hcHMvLi9saWIvZ2Rtc1Rva2VuLnRzP2Y4ZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkBsaWIvcHJpc21hXCI7XHJcblxyXG4vLyBNZW3Ds3JpYSBsb2NhbCBwYXJhIHJlZHV6aXIgSU8sIG1hcyBhIHZlcmRhZGUgZmljYSBubyBEQlxyXG50eXBlIFRva2VuUmVjb3JkID0geyBhY2Nlc3NUb2tlbjogc3RyaW5nOyBleHBpcmVzQXQ6IG51bWJlciB9O1xyXG5jb25zdCBtZW0gPSB7IHRva2VuOiBudWxsIGFzIFRva2VuUmVjb3JkIHwgbnVsbCB9O1xyXG5cclxuY29uc3QgU0tFV19NUyA9IDYwXzAwMDsgLy8gcmVub3ZhIGNvbSAxbWluIGRlIGFudGVjZWTDqm5jaWFcclxuXHJcbmZ1bmN0aW9uIG5vdygpIHsgcmV0dXJuIERhdGUubm93KCk7IH1cclxuZnVuY3Rpb24gd2lsbEV4cGlyZVNvb24oZXhwaXJlc0F0OiBudW1iZXIsIHNrZXdNcyA9IFNLRVdfTVMpIHtcclxuICByZXR1cm4gZXhwaXJlc0F0IDw9IChub3coKSArIHNrZXdNcyk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRGcm9tRGIoKTogUHJvbWlzZTxUb2tlblJlY29yZCB8IG51bGw+IHtcclxuICBjb25zdCByb3cgPSBhd2FpdCBwcmlzbWEuZ2Rtc1Rva2VuLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogMSB9IH0pLmNhdGNoKCgpID0+IG51bGwpO1xyXG4gIGlmICghcm93KSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4geyBhY2Nlc3NUb2tlbjogcm93LmFjY2Vzc1Rva2VuLCBleHBpcmVzQXQ6IG5ldyBEYXRlKHJvdy5leHBpcmVzQXQpLmdldFRpbWUoKSB9O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNhdmVUb0RiKHRvazogVG9rZW5SZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBhd2FpdCBwcmlzbWEuZ2Rtc1Rva2VuLnVwc2VydCh7XHJcbiAgICB3aGVyZTogeyBpZDogMSB9LFxyXG4gICAgY3JlYXRlOiB7IGlkOiAxLCBhY2Nlc3NUb2tlbjogdG9rLmFjY2Vzc1Rva2VuLCBleHBpcmVzQXQ6IG5ldyBEYXRlKHRvay5leHBpcmVzQXQpIH0sXHJcbiAgICB1cGRhdGU6IHsgYWNjZXNzVG9rZW46IHRvay5hY2Nlc3NUb2tlbiwgZXhwaXJlc0F0OiBuZXcgRGF0ZSh0b2suZXhwaXJlc0F0KSB9LFxyXG4gIH0pO1xyXG4gIG1lbS50b2tlbiA9IHRvazsgLy8gc2luY3Jvbml6YSBjYWNoZVxyXG59XHJcblxyXG4vLyA9PT0gT0F1dGggY2xpZW50X2NyZWRlbnRpYWxzID09PVxyXG4vLyBFcXVpdmFsZW50ZSBhbyBzZXUgY3VybDpcclxuLy8gY3VybCAtWCBQT1NUIFwiJEdETVNfT0FVVEhfVVJMXCIgXFxcclxuLy8gICAtSCBcIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgXFxcclxuLy8gICAtLWRhdGEgXCJncmFudF90eXBlPWNsaWVudF9jcmVkZW50aWFscyZjbGllbnRfaWQ9Li4uJmNsaWVudF9zZWNyZXQ9Li4uXCJcclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDbGllbnRDcmVkZW50aWFsc1Rva2VuKCk6IFByb21pc2U8VG9rZW5SZWNvcmQ+IHtcclxuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5HRE1TX09BVVRIX1VSTCE7XHJcbiAgY29uc3QgY2xpZW50SWQgPSBwcm9jZXNzLmVudi5HRE1TX0NMSUVOVF9JRCE7XHJcbiAgY29uc3QgY2xpZW50U2VjcmV0ID0gcHJvY2Vzcy5lbnYuR0RNU19DTElFTlRfU0VDUkVUITtcclxuICBpZiAoIXVybCB8fCAhY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJlIEdETVNfT0FVVEhfVVJMLCBHRE1TX0NMSUVOVF9JRCBlIEdETVNfQ0xJRU5UX1NFQ1JFVC5cIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG4gIGJvZHkuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImNsaWVudF9jcmVkZW50aWFsc1wiKTtcclxuICBib2R5LnNldChcImNsaWVudF9pZFwiLCBjbGllbnRJZCk7XHJcbiAgYm9keS5zZXQoXCJjbGllbnRfc2VjcmV0XCIsIGNsaWVudFNlY3JldCk7XHJcblxyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiB9LFxyXG4gICAgYm9keSxcclxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgfSk7XHJcbiAgaWYgKCFyZXMub2spIHtcclxuICAgIGNvbnN0IHQgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBPQXV0aCB0b2tlbiBmYWlsZWQgJHtyZXMuc3RhdHVzfTogJHt0fWApO1xyXG4gIH1cclxuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICBjb25zdCBhY2Nlc3NUb2tlbiA9IGpzb24/LmFjY2Vzc190b2tlbiA/PyBqc29uPy50b2tlbjtcclxuICBjb25zdCB0dGxTZWMgPSBqc29uPy5leHBpcmVzX2luID8/IDM2MDA7XHJcbiAgaWYgKCFhY2Nlc3NUb2tlbikgdGhyb3cgbmV3IEVycm9yKFwiT0F1dGggdG9rZW4gcmVzcG9uc2UgbWlzc2luZyBhY2Nlc3NfdG9rZW5cIik7XHJcbiAgcmV0dXJuIHsgYWNjZXNzVG9rZW4sIGV4cGlyZXNBdDogbm93KCkgKyB0dGxTZWMgKiAxMDAwIH07XHJcbn1cclxuXHJcbi8vIFJlbm92YSBlIHBlcnNpc3RlXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWZyZXNoVG9rZW4oKTogUHJvbWlzZTxUb2tlblJlY29yZD4ge1xyXG4gIGNvbnN0IHJlYyA9IGF3YWl0IGZldGNoQ2xpZW50Q3JlZGVudGlhbHNUb2tlbigpO1xyXG4gIGF3YWl0IHNhdmVUb0RiKHJlYyk7XHJcbiAgcmV0dXJuIHJlYztcclxufVxyXG5cclxuLy8gRXhwb3N0YSBwYXJhIHF1ZW0gcHJlY2lzYSBkbyB0b2tlblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAvLyAxKSBtZW3Ds3JpYSBvaz9cclxuICBpZiAobWVtLnRva2VuICYmICF3aWxsRXhwaXJlU29vbihtZW0udG9rZW4uZXhwaXJlc0F0KSkgcmV0dXJuIG1lbS50b2tlbi5hY2Nlc3NUb2tlbjtcclxuXHJcbiAgLy8gMikgREJcclxuICBjb25zdCBkYlRvayA9IGF3YWl0IGxvYWRGcm9tRGIoKTtcclxuICBpZiAoZGJUb2sgJiYgIXdpbGxFeHBpcmVTb29uKGRiVG9rLmV4cGlyZXNBdCkpIHtcclxuICAgIG1lbS50b2tlbiA9IGRiVG9rO1xyXG4gICAgcmV0dXJuIGRiVG9rLmFjY2Vzc1Rva2VuO1xyXG4gIH1cclxuXHJcbiAgLy8gMykgcmVub3ZhciB2aWEgT0F1dGggZSBzYWx2YXJcclxuICBjb25zdCBuZXdUb2sgPSBhd2FpdCByZWZyZXNoVG9rZW4oKTtcclxuICByZXR1cm4gbmV3VG9rLmFjY2Vzc1Rva2VuO1xyXG59XHJcblxyXG4vLyBPcGNpb25hbDogZm9yY2UgcmVmcmVzaCB2aWEgZW5kcG9pbnQvYWRtaW5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZvcmNlUmVmcmVzaCgpIHtcclxuICByZXR1cm4gcmVmcmVzaFRva2VuKCk7XHJcbn1cclxuXHJcbi8vIFBhcmEgVUkvbW9uaXRvcmFyIChuw6NvIGV4cMO1ZSBvIHRva2VuKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG9rZW5JbmZvKCkge1xyXG4gIGNvbnN0IGRiVG9rID0gYXdhaXQgbG9hZEZyb21EYigpO1xyXG4gIGNvbnN0IGV4cCA9IGRiVG9rPy5leHBpcmVzQXQgPz8gMDtcclxuICByZXR1cm4ge1xyXG4gICAgaGFzVG9rZW46ICEhZGJUb2ssXHJcbiAgICBleHBpcmVzQXQ6IGV4cCxcclxuICAgIGV4cGlyZXNJblNlYzogZXhwID8gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigoZXhwIC0gbm93KCkpIC8gMTAwMCkpIDogbnVsbCxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJtZW0iLCJ0b2tlbiIsIlNLRVdfTVMiLCJub3ciLCJEYXRlIiwid2lsbEV4cGlyZVNvb24iLCJleHBpcmVzQXQiLCJza2V3TXMiLCJsb2FkRnJvbURiIiwicm93IiwiZ2Rtc1Rva2VuIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJjYXRjaCIsImFjY2Vzc1Rva2VuIiwiZ2V0VGltZSIsInNhdmVUb0RiIiwidG9rIiwidXBzZXJ0IiwiY3JlYXRlIiwidXBkYXRlIiwiZmV0Y2hDbGllbnRDcmVkZW50aWFsc1Rva2VuIiwidXJsIiwicHJvY2VzcyIsImVudiIsIkdETVNfT0FVVEhfVVJMIiwiY2xpZW50SWQiLCJHRE1TX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdETVNfQ0xJRU5UX1NFQ1JFVCIsIkVycm9yIiwiYm9keSIsIlVSTFNlYXJjaFBhcmFtcyIsInNldCIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImNhY2hlIiwib2siLCJ0IiwidGV4dCIsInN0YXR1cyIsImpzb24iLCJhY2Nlc3NfdG9rZW4iLCJ0dGxTZWMiLCJleHBpcmVzX2luIiwicmVmcmVzaFRva2VuIiwicmVjIiwiZ2V0QWNjZXNzVG9rZW4iLCJkYlRvayIsIm5ld1RvayIsImZvcmNlUmVmcmVzaCIsImdldFRva2VuSW5mbyIsImV4cCIsImhhc1Rva2VuIiwiZXhwaXJlc0luU2VjIiwiTWF0aCIsIm1heCIsImZsb29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gdmsToken.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"warn\",\n        \"error\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxrQkFBa0JDO0FBRWpCLE1BQU1DLFNBQ1hGLGdCQUFnQkUsTUFBTSxJQUN0QixJQUFJSCx3REFBWUEsQ0FBQztJQUNmSSxLQUFLO1FBQUM7UUFBUTtLQUFRO0FBQ3hCLEdBQUc7QUFFTCxJQUFJQyxJQUFxQyxFQUFFSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbnRlbm5hX21hcHMvLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYT86IFByaXNtYUNsaWVudCB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBbXCJ3YXJuXCIsIFwiZXJyb3JcIl1cclxuICB9KTtcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWwiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./services/gdms.ts":
/*!**************************!*\
  !*** ./services/gdms.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   listAPsByNetwork: () => (/* binding */ listAPsByNetwork),\n/* harmony export */   listAllAps: () => (/* binding */ listAllAps),\n/* harmony export */   listNetworks: () => (/* binding */ listNetworks)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_gdmsToken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/gdmsToken */ \"(rsc)/./lib/gdmsToken.ts\");\n// services/gdms.ts\n\n\nfunction env() {\n    const base = process.env.GDMS_BASE ?? \"https://www.gwn.cloud\";\n    const appId = process.env.GDMS_CLIENT_ID ?? process.env.GDMS_APP_ID ?? \"\";\n    const secret = process.env.GDMS_CLIENT_SECRET ?? process.env.GDMS_SECRET ?? \"\";\n    const pageSize = Number(process.env.GDMS_PAGE_SIZE ?? 200);\n    const show = process.env.GDMS_SHOW ?? \"all\";\n    if (!appId || !secret) throw new Error(\"Configure GDMS_CLIENT_ID e GDMS_CLIENT_SECRET (ou GDMS_APP_ID/GDMS_SECRET).\");\n    return {\n        base,\n        appId,\n        secret,\n        pageSize,\n        show\n    };\n}\nfunction sha256Hex(s) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(s).digest(\"hex\");\n}\nfunction buildSignature(args) {\n    const bodyHash = sha256Hex(args.body);\n    const seed = `&access_token=${args.accessToken}&appID=${args.appId}&secretKey=${args.secret}&timestamp=${args.timestamp}&${bodyHash}&`;\n    return sha256Hex(seed);\n}\nasync function postJson(path, bodyObj) {\n    const { base, appId, secret } = env();\n    const accessToken = await (0,_lib_gdmsToken__WEBPACK_IMPORTED_MODULE_1__.getAccessToken)();\n    const body = JSON.stringify(bodyObj);\n    const ts = Date.now().toString();\n    const signature = buildSignature({\n        accessToken,\n        appId,\n        secret,\n        timestamp: ts,\n        body\n    });\n    const url = `${base}${path}?access_token=${accessToken}&appID=${appId}&timestamp=${ts}&signature=${signature}`;\n    const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    let json;\n    try {\n        json = await res.json();\n    } catch  {\n        json = {\n            err: await res.text()\n        };\n    }\n    if (!res.ok) throw new Error(`GDMS ${path} ${res.status}: ${JSON.stringify(json).slice(0, 500)}`);\n    if (json?.retCode && String(json.retCode) !== \"0\") {\n        throw new Error(`GDMS ${path} retCode=${json.retCode} msg=${json.msg ?? \"\"}`);\n    }\n    return json;\n}\nfunction pickApId(ap) {\n    const cand = ap.id ?? ap.apId ?? ap.ap_id ?? ap.apID ?? ap.deviceId ?? ap.device_id ?? ap.mac ?? ap.MAC ?? ap.macAddr ?? ap.macAddress ?? ap.serialNumber ?? ap.sn ?? ap.SN ?? ap.uuid ?? ap.UUID;\n    if (cand === undefined || cand === null) return undefined;\n    const s = String(cand).trim();\n    return s.length ? s : undefined;\n}\nfunction pickLat(ap) {\n    return ap.ap_latitude ?? ap.latitude ?? ap.lat ?? ap.Latitude ?? ap.Lat ?? ap.gpsLatitude ?? ap.gpsLat ?? ap.gps?.latitude ?? ap.gps?.lat ?? ap.locationLatitude ?? ap.location?.latitude ?? ap.location?.lat ?? ap.position?.latitude ?? ap.position?.lat ?? undefined;\n}\nfunction pickLng(ap) {\n    return ap.ap_longitude ?? ap.longitude ?? ap.lng ?? ap.Longitude ?? ap.Lng ?? ap.gpsLongitude ?? ap.gpsLng ?? ap.gps?.longitude ?? ap.gps?.lng ?? ap.locationLongitude ?? ap.location?.longitude ?? ap.location?.lng ?? ap.position?.longitude ?? ap.position?.lng ?? undefined;\n}\nfunction shouldContinue(pageNum, pageSize, info) {\n    const { totalPage, total, received } = info;\n    if (typeof totalPage === \"number\" && totalPage > 0) return pageNum < totalPage;\n    if (typeof total === \"number\" && total > 0) return pageNum * pageSize < total;\n    return (received ?? 0) === pageSize;\n}\nasync function listNetworks() {\n    const { pageSize } = env();\n    let pageNum = 1;\n    const out = [];\n    while(true){\n        const body = {\n            search: \"\",\n            order: \"id\",\n            pageNum,\n            pageSize\n        };\n        const json = await postJson(\"/oapi/v1.0.0/network/list\", body);\n        const arr = json.data?.result ?? [];\n        for (const n of arr)out.push({\n            id: String(n.id),\n            networkName: n.networkName ?? \"\"\n        });\n        const totalPage = Number(json.data?.totalPage ?? 0) || undefined;\n        const total = Number(json.data?.total ?? 0) || undefined;\n        if (!shouldContinue(pageNum, pageSize, {\n            totalPage,\n            total,\n            received: arr.length\n        })) break;\n        pageNum++;\n    }\n    return out;\n}\nasync function listAPsByNetwork(nid, networkName) {\n    const { pageSize, show } = env();\n    let pageNum = 1;\n    const out = [];\n    while(true){\n        const body = {\n            search: \"\",\n            order: \"id\",\n            pageNum,\n            pageSize,\n            networkId: nid,\n            filter: {\n                showType: show\n            }\n        };\n        const json = await postJson(\"/oapi/v1.0.0/ap/list\", body);\n        const res = json.data?.result ?? [];\n        for (const ap of res){\n            const apId = pickApId(ap);\n            if (!apId) continue;\n            out.push({\n                networkId: nid,\n                networkName,\n                apId,\n                apName: ap.name ?? `AP-${apId}`,\n                status: (ap.status ?? 0) === 1 ? \"UP\" : \"DOWN\",\n                lat: pickLat(ap),\n                lng: pickLng(ap)\n            });\n        }\n        const totalPage = Number(json.data?.totalPage ?? 0) || undefined;\n        const total = Number(json.data?.total ?? 0) || undefined;\n        if (!shouldContinue(pageNum, pageSize, {\n            totalPage,\n            total,\n            received: res.length\n        })) break;\n        pageNum++;\n    }\n    return out;\n}\nasync function listAllAps() {\n    const nets = await listNetworks();\n    const all = [];\n    for (const n of nets){\n        const aps = await listAPsByNetwork(n.id, n.networkName ?? \"\");\n        all.push(...aps);\n    }\n    const seen = new Set();\n    const dedup = [];\n    for (const ap of all){\n        if (!seen.has(ap.apId)) {\n            seen.add(ap.apId);\n            dedup.push(ap);\n        }\n    }\n    return dedup;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwRnVCO0lBQ0Y7SUFFQSxPQUFPTTtBQUNUO0FBRU8sZUFBZWdCO0lBQ3BCLE1BQU1DLE9BQU8sTUFBTWxCO0lBQ25CLE1BQU1tQixNQUFzQixFQUFFO0lBQzlCLEtBQUssTUFBTVosS0FBS1csS0FBTTtRQUNwQixNQUFNRSxNQUFNLE1BQU1WLGlCQUFpQkgsRUFBRXBELEVBQUUsRUFBRW9ELEVBQUVFLFdBQVcsSUFBSTtRQUMxRFUsSUFBSVgsSUFBSSxJQUFJWTtJQUNkO0lBQ0EsTUFBTUMsT0FBTyxJQUFJQztJQUNqQixNQUFNQyxRQUF3QixFQUFFO0lBQ2hDLEtBQUssTUFBTXRFLE1BQU1rRSxJQUFLO1FBQ3BCLElBQUksQ0FBQ0UsS0FBS0csR0FBRyxDQUFDdkUsR0FBR0csSUFBSSxHQUFHO1lBQUVpRSxLQUFLSSxHQUFHLENBQUN4RSxHQUFHRyxJQUFJO1lBQUdtRSxNQUFNZixJQUFJLENBQUN2RDtRQUFLO0lBQy9EO0lBQ0EsT0FBT3NFO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbnRlbm5hX21hcHMvLi9zZXJ2aWNlcy9nZG1zLnRzPzI5NmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2VydmljZXMvZ2Rtcy50c1xyXG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcclxuaW1wb3J0IHsgZ2V0QWNjZXNzVG9rZW4gfSBmcm9tIFwiQGxpYi9nZG1zVG9rZW5cIjtcclxuXHJcbnR5cGUgR2Rtc0VudiA9IHtcclxuICBiYXNlOiBzdHJpbmc7XHJcbiAgYXBwSWQ6IHN0cmluZztcclxuICBzZWNyZXQ6IHN0cmluZztcclxuICBwYWdlU2l6ZTogbnVtYmVyO1xyXG4gIHNob3c6IFwiYWxsXCIgfCBcIjFcIiB8IFwiMFwiO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZW52KCk6IEdkbXNFbnYge1xyXG4gIGNvbnN0IGJhc2UgPSBwcm9jZXNzLmVudi5HRE1TX0JBU0UgPz8gXCJodHRwczovL3d3dy5nd24uY2xvdWRcIjtcclxuICBjb25zdCBhcHBJZCA9IHByb2Nlc3MuZW52LkdETVNfQ0xJRU5UX0lEID8/IHByb2Nlc3MuZW52LkdETVNfQVBQX0lEID8/IFwiXCI7XHJcbiAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuR0RNU19DTElFTlRfU0VDUkVUID8/IHByb2Nlc3MuZW52LkdETVNfU0VDUkVUID8/IFwiXCI7XHJcbiAgY29uc3QgcGFnZVNpemUgPSBOdW1iZXIocHJvY2Vzcy5lbnYuR0RNU19QQUdFX1NJWkUgPz8gMjAwKTtcclxuICBjb25zdCBzaG93ID0gKHByb2Nlc3MuZW52LkdETVNfU0hPVyBhcyBHZG1zRW52W1wic2hvd1wiXSkgPz8gXCJhbGxcIjtcclxuICBpZiAoIWFwcElkIHx8ICFzZWNyZXQpIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyZSBHRE1TX0NMSUVOVF9JRCBlIEdETVNfQ0xJRU5UX1NFQ1JFVCAob3UgR0RNU19BUFBfSUQvR0RNU19TRUNSRVQpLlwiKTtcclxuICByZXR1cm4geyBiYXNlLCBhcHBJZCwgc2VjcmV0LCBwYWdlU2l6ZSwgc2hvdyB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaGEyNTZIZXgoczogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShzKS5kaWdlc3QoXCJoZXhcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkU2lnbmF0dXJlKGFyZ3M6IHtcclxuICBhY2Nlc3NUb2tlbjogc3RyaW5nOyBhcHBJZDogc3RyaW5nOyBzZWNyZXQ6IHN0cmluZzsgdGltZXN0YW1wOiBzdHJpbmc7IGJvZHk6IHN0cmluZztcclxufSkge1xyXG4gIGNvbnN0IGJvZHlIYXNoID0gc2hhMjU2SGV4KGFyZ3MuYm9keSk7XHJcbiAgY29uc3Qgc2VlZCA9IGAmYWNjZXNzX3Rva2VuPSR7YXJncy5hY2Nlc3NUb2tlbn0mYXBwSUQ9JHthcmdzLmFwcElkfSZzZWNyZXRLZXk9JHthcmdzLnNlY3JldH0mdGltZXN0YW1wPSR7YXJncy50aW1lc3RhbXB9JiR7Ym9keUhhc2h9JmA7XHJcbiAgcmV0dXJuIHNoYTI1NkhleChzZWVkKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcG9zdEpzb248VD4ocGF0aDogc3RyaW5nLCBib2R5T2JqOiBhbnkpOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCB7IGJhc2UsIGFwcElkLCBzZWNyZXQgfSA9IGVudigpO1xyXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgZ2V0QWNjZXNzVG9rZW4oKTtcclxuXHJcbiAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHlPYmopO1xyXG4gIGNvbnN0IHRzID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xyXG4gIGNvbnN0IHNpZ25hdHVyZSA9IGJ1aWxkU2lnbmF0dXJlKHsgYWNjZXNzVG9rZW4sIGFwcElkLCBzZWNyZXQsIHRpbWVzdGFtcDogdHMsIGJvZHkgfSk7XHJcblxyXG4gIGNvbnN0IHVybCA9IGAke2Jhc2V9JHtwYXRofT9hY2Nlc3NfdG9rZW49JHthY2Nlc3NUb2tlbn0mYXBwSUQ9JHthcHBJZH0mdGltZXN0YW1wPSR7dHN9JnNpZ25hdHVyZT0ke3NpZ25hdHVyZX1gO1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6IFwiUE9TVFwiLCBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sIGJvZHksIGNhY2hlOiBcIm5vLXN0b3JlXCIgfSk7XHJcblxyXG4gIGxldCBqc29uOiBhbnk7XHJcbiAgdHJ5IHsganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7IH0gY2F0Y2ggeyBqc29uID0geyBlcnI6IGF3YWl0IHJlcy50ZXh0KCkgfTsgfVxyXG5cclxuICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBHRE1TICR7cGF0aH0gJHtyZXMuc3RhdHVzfTogJHtKU09OLnN0cmluZ2lmeShqc29uKS5zbGljZSgwLCA1MDApfWApO1xyXG4gIGlmIChqc29uPy5yZXRDb2RlICYmIFN0cmluZyhqc29uLnJldENvZGUpICE9PSBcIjBcIikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBHRE1TICR7cGF0aH0gcmV0Q29kZT0ke2pzb24ucmV0Q29kZX0gbXNnPSR7anNvbi5tc2cgPz8gXCJcIn1gKTtcclxuICB9XHJcbiAgcmV0dXJuIGpzb24gYXMgVDtcclxufVxyXG5cclxudHlwZSBOZXR3b3JrUm93ID0geyBpZDogc3RyaW5nIHwgbnVtYmVyOyBuZXR3b3JrTmFtZT86IHN0cmluZyB9O1xyXG50eXBlIEFwUm93ID0geyBuYW1lPzogc3RyaW5nOyBzdGF0dXM/OiBudW1iZXI7IFtrOiBzdHJpbmddOiBhbnkgfTtcclxuXHJcbmV4cG9ydCB0eXBlIE5vcm1hbGl6ZWRBcCA9IHtcclxuICBuZXR3b3JrSWQ6IHN0cmluZztcclxuICBuZXR3b3JrTmFtZTogc3RyaW5nO1xyXG4gIGFwSWQ6IHN0cmluZztcclxuICBhcE5hbWU6IHN0cmluZztcclxuICBzdGF0dXM6IFwiVVBcIiB8IFwiRE9XTlwiO1xyXG4gIGxhdD86IG51bWJlcjtcclxuICBsbmc/OiBudW1iZXI7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBwaWNrQXBJZChhcDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICBjb25zdCBjYW5kID1cclxuICAgIGFwLmlkID8/XHJcbiAgICBhcC5hcElkID8/IGFwLmFwX2lkID8/IGFwLmFwSUQgPz9cclxuICAgIGFwLmRldmljZUlkID8/IGFwLmRldmljZV9pZCA/P1xyXG4gICAgYXAubWFjID8/IGFwLk1BQyA/PyBhcC5tYWNBZGRyID8/IGFwLm1hY0FkZHJlc3MgPz9cclxuICAgIGFwLnNlcmlhbE51bWJlciA/PyBhcC5zbiA/PyBhcC5TTiA/P1xyXG4gICAgYXAudXVpZCA/PyBhcC5VVUlEO1xyXG4gIGlmIChjYW5kID09PSB1bmRlZmluZWQgfHwgY2FuZCA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICBjb25zdCBzID0gU3RyaW5nKGNhbmQpLnRyaW0oKTtcclxuICByZXR1cm4gcy5sZW5ndGggPyBzIDogdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwaWNrTGF0KGFwOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gIHJldHVybiAoXHJcbiAgICBhcC5hcF9sYXRpdHVkZSA/PyBhcC5sYXRpdHVkZSA/PyBhcC5sYXQgPz8gYXAuTGF0aXR1ZGUgPz8gYXAuTGF0ID8/XHJcbiAgICBhcC5ncHNMYXRpdHVkZSA/PyBhcC5ncHNMYXQgPz8gYXAuZ3BzPy5sYXRpdHVkZSA/PyBhcC5ncHM/LmxhdCA/P1xyXG4gICAgYXAubG9jYXRpb25MYXRpdHVkZSA/PyBhcC5sb2NhdGlvbj8ubGF0aXR1ZGUgPz8gYXAubG9jYXRpb24/LmxhdCA/P1xyXG4gICAgYXAucG9zaXRpb24/LmxhdGl0dWRlID8/IGFwLnBvc2l0aW9uPy5sYXQgPz8gdW5kZWZpbmVkXHJcbiAgKTtcclxufVxyXG5mdW5jdGlvbiBwaWNrTG5nKGFwOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gIHJldHVybiAoXHJcbiAgICBhcC5hcF9sb25naXR1ZGUgPz8gYXAubG9uZ2l0dWRlID8/IGFwLmxuZyA/PyBhcC5Mb25naXR1ZGUgPz8gYXAuTG5nID8/XHJcbiAgICBhcC5ncHNMb25naXR1ZGUgPz8gYXAuZ3BzTG5nID8/IGFwLmdwcz8ubG9uZ2l0dWRlID8/IGFwLmdwcz8ubG5nID8/XHJcbiAgICBhcC5sb2NhdGlvbkxvbmdpdHVkZSA/PyBhcC5sb2NhdGlvbj8ubG9uZ2l0dWRlID8/IGFwLmxvY2F0aW9uPy5sbmcgPz9cclxuICAgIGFwLnBvc2l0aW9uPy5sb25naXR1ZGUgPz8gYXAucG9zaXRpb24/LmxuZyA/PyB1bmRlZmluZWRcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG91bGRDb250aW51ZShwYWdlTnVtOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIsIGluZm86IHsgdG90YWxQYWdlPzogbnVtYmVyOyB0b3RhbD86IG51bWJlcjsgcmVjZWl2ZWQ/OiBudW1iZXIgfSkge1xyXG4gIGNvbnN0IHsgdG90YWxQYWdlLCB0b3RhbCwgcmVjZWl2ZWQgfSA9IGluZm87XHJcbiAgaWYgKHR5cGVvZiB0b3RhbFBhZ2UgPT09IFwibnVtYmVyXCIgJiYgdG90YWxQYWdlID4gMCkgcmV0dXJuIHBhZ2VOdW0gPCB0b3RhbFBhZ2U7XHJcbiAgaWYgKHR5cGVvZiB0b3RhbCA9PT0gXCJudW1iZXJcIiAmJiB0b3RhbCA+IDApIHJldHVybiAocGFnZU51bSAqIHBhZ2VTaXplKSA8IHRvdGFsO1xyXG4gIHJldHVybiAocmVjZWl2ZWQgPz8gMCkgPT09IHBhZ2VTaXplO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdE5ldHdvcmtzKCk6IFByb21pc2U8QXJyYXk8eyBpZDogc3RyaW5nOyBuZXR3b3JrTmFtZTogc3RyaW5nIH0+PiB7XHJcbiAgY29uc3QgeyBwYWdlU2l6ZSB9ID0gZW52KCk7XHJcbiAgbGV0IHBhZ2VOdW0gPSAxO1xyXG4gIGNvbnN0IG91dDogQXJyYXk8eyBpZDogc3RyaW5nOyBuZXR3b3JrTmFtZTogc3RyaW5nIH0+ID0gW107XHJcblxyXG4gIHdoaWxlICh0cnVlKSB7XHJcbiAgICBjb25zdCBib2R5ID0geyBzZWFyY2g6IFwiXCIsIG9yZGVyOiBcImlkXCIsIHBhZ2VOdW0sIHBhZ2VTaXplIH07XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcG9zdEpzb248eyBkYXRhPzogeyByZXN1bHQ/OiBOZXR3b3JrUm93W107IHRvdGFsUGFnZT86IG51bWJlcjsgdG90YWw/OiBudW1iZXIgfSB9PihcclxuICAgICAgXCIvb2FwaS92MS4wLjAvbmV0d29yay9saXN0XCIsXHJcbiAgICAgIGJvZHlcclxuICAgICk7XHJcbiAgICBjb25zdCBhcnIgPSBqc29uLmRhdGE/LnJlc3VsdCA/PyBbXTtcclxuICAgIGZvciAoY29uc3QgbiBvZiBhcnIpIG91dC5wdXNoKHsgaWQ6IFN0cmluZyhuLmlkKSwgbmV0d29ya05hbWU6IG4ubmV0d29ya05hbWUgPz8gXCJcIiB9KTtcclxuXHJcbiAgICBjb25zdCB0b3RhbFBhZ2UgPSBOdW1iZXIoanNvbi5kYXRhPy50b3RhbFBhZ2UgPz8gMCkgfHwgdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgdG90YWwgPSBOdW1iZXIoanNvbi5kYXRhPy50b3RhbCA/PyAwKSB8fCB1bmRlZmluZWQ7XHJcbiAgICBpZiAoIXNob3VsZENvbnRpbnVlKHBhZ2VOdW0sIHBhZ2VTaXplLCB7IHRvdGFsUGFnZSwgdG90YWwsIHJlY2VpdmVkOiBhcnIubGVuZ3RoIH0pKSBicmVhaztcclxuICAgIHBhZ2VOdW0rKztcclxuICB9XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RBUHNCeU5ldHdvcmsobmlkOiBzdHJpbmcsIG5ldHdvcmtOYW1lOiBzdHJpbmcpOiBQcm9taXNlPE5vcm1hbGl6ZWRBcFtdPiB7XHJcbiAgY29uc3QgeyBwYWdlU2l6ZSwgc2hvdyB9ID0gZW52KCk7XHJcbiAgbGV0IHBhZ2VOdW0gPSAxO1xyXG4gIGNvbnN0IG91dDogTm9ybWFsaXplZEFwW10gPSBbXTtcclxuXHJcbiAgd2hpbGUgKHRydWUpIHtcclxuICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgIHNlYXJjaDogXCJcIixcclxuICAgICAgb3JkZXI6IFwiaWRcIixcclxuICAgICAgcGFnZU51bSxcclxuICAgICAgcGFnZVNpemUsXHJcbiAgICAgIG5ldHdvcmtJZDogbmlkLFxyXG4gICAgICBmaWx0ZXI6IHsgc2hvd1R5cGU6IHNob3cgfSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHBvc3RKc29uPHsgZGF0YT86IHsgcmVzdWx0PzogQXBSb3dbXTsgdG90YWxQYWdlPzogbnVtYmVyOyB0b3RhbD86IG51bWJlciB9IH0+KFxyXG4gICAgICBcIi9vYXBpL3YxLjAuMC9hcC9saXN0XCIsXHJcbiAgICAgIGJvZHlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcmVzID0ganNvbi5kYXRhPy5yZXN1bHQgPz8gW107XHJcbiAgICBmb3IgKGNvbnN0IGFwIG9mIHJlcykge1xyXG4gICAgICBjb25zdCBhcElkID0gcGlja0FwSWQoYXApO1xyXG4gICAgICBpZiAoIWFwSWQpIGNvbnRpbnVlO1xyXG4gICAgICBvdXQucHVzaCh7XHJcbiAgICAgICAgbmV0d29ya0lkOiBuaWQsXHJcbiAgICAgICAgbmV0d29ya05hbWUsXHJcbiAgICAgICAgYXBJZCxcclxuICAgICAgICBhcE5hbWU6IGFwLm5hbWUgPz8gYEFQLSR7YXBJZH1gLFxyXG4gICAgICAgIHN0YXR1czogKGFwLnN0YXR1cyA/PyAwKSA9PT0gMSA/IFwiVVBcIiA6IFwiRE9XTlwiLFxyXG4gICAgICAgIGxhdDogcGlja0xhdChhcCksXHJcbiAgICAgICAgbG5nOiBwaWNrTG5nKGFwKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG90YWxQYWdlID0gTnVtYmVyKGpzb24uZGF0YT8udG90YWxQYWdlID8/IDApIHx8IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHRvdGFsID0gTnVtYmVyKGpzb24uZGF0YT8udG90YWwgPz8gMCkgfHwgdW5kZWZpbmVkO1xyXG4gICAgaWYgKCFzaG91bGRDb250aW51ZShwYWdlTnVtLCBwYWdlU2l6ZSwgeyB0b3RhbFBhZ2UsIHRvdGFsLCByZWNlaXZlZDogcmVzLmxlbmd0aCB9KSkgYnJlYWs7XHJcbiAgICBwYWdlTnVtKys7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdEFsbEFwcygpOiBQcm9taXNlPE5vcm1hbGl6ZWRBcFtdPiB7XHJcbiAgY29uc3QgbmV0cyA9IGF3YWl0IGxpc3ROZXR3b3JrcygpO1xyXG4gIGNvbnN0IGFsbDogTm9ybWFsaXplZEFwW10gPSBbXTtcclxuICBmb3IgKGNvbnN0IG4gb2YgbmV0cykge1xyXG4gICAgY29uc3QgYXBzID0gYXdhaXQgbGlzdEFQc0J5TmV0d29yayhuLmlkLCBuLm5ldHdvcmtOYW1lID8/IFwiXCIpO1xyXG4gICAgYWxsLnB1c2goLi4uYXBzKTtcclxuICB9XHJcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gIGNvbnN0IGRlZHVwOiBOb3JtYWxpemVkQXBbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgYXAgb2YgYWxsKSB7XHJcbiAgICBpZiAoIXNlZW4uaGFzKGFwLmFwSWQpKSB7IHNlZW4uYWRkKGFwLmFwSWQpOyBkZWR1cC5wdXNoKGFwKTsgfVxyXG4gIH1cclxuICByZXR1cm4gZGVkdXA7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyeXB0byIsImdldEFjY2Vzc1Rva2VuIiwiZW52IiwiYmFzZSIsInByb2Nlc3MiLCJHRE1TX0JBU0UiLCJhcHBJZCIsIkdETVNfQ0xJRU5UX0lEIiwiR0RNU19BUFBfSUQiLCJzZWNyZXQiLCJHRE1TX0NMSUVOVF9TRUNSRVQiLCJHRE1TX1NFQ1JFVCIsInBhZ2VTaXplIiwiTnVtYmVyIiwiR0RNU19QQUdFX1NJWkUiLCJzaG93IiwiR0RNU19TSE9XIiwiRXJyb3IiLCJzaGEyNTZIZXgiLCJzIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImJ1aWxkU2lnbmF0dXJlIiwiYXJncyIsImJvZHlIYXNoIiwiYm9keSIsInNlZWQiLCJhY2Nlc3NUb2tlbiIsInRpbWVzdGFtcCIsInBvc3RKc29uIiwicGF0aCIsImJvZHlPYmoiLCJKU09OIiwic3RyaW5naWZ5IiwidHMiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJzaWduYXR1cmUiLCJ1cmwiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJjYWNoZSIsImpzb24iLCJlcnIiLCJ0ZXh0Iiwib2siLCJzdGF0dXMiLCJzbGljZSIsInJldENvZGUiLCJTdHJpbmciLCJtc2ciLCJwaWNrQXBJZCIsImFwIiwiY2FuZCIsImlkIiwiYXBJZCIsImFwX2lkIiwiYXBJRCIsImRldmljZUlkIiwiZGV2aWNlX2lkIiwibWFjIiwiTUFDIiwibWFjQWRkciIsIm1hY0FkZHJlc3MiLCJzZXJpYWxOdW1iZXIiLCJzbiIsIlNOIiwidXVpZCIsIlVVSUQiLCJ1bmRlZmluZWQiLCJ0cmltIiwibGVuZ3RoIiwicGlja0xhdCIsImFwX2xhdGl0dWRlIiwibGF0aXR1ZGUiLCJsYXQiLCJMYXRpdHVkZSIsIkxhdCIsImdwc0xhdGl0dWRlIiwiZ3BzTGF0IiwiZ3BzIiwibG9jYXRpb25MYXRpdHVkZSIsImxvY2F0aW9uIiwicG9zaXRpb24iLCJwaWNrTG5nIiwiYXBfbG9uZ2l0dWRlIiwibG9uZ2l0dWRlIiwibG5nIiwiTG9uZ2l0dWRlIiwiTG5nIiwiZ3BzTG9uZ2l0dWRlIiwiZ3BzTG5nIiwibG9jYXRpb25Mb25naXR1ZGUiLCJzaG91bGRDb250aW51ZSIsInBhZ2VOdW0iLCJpbmZvIiwidG90YWxQYWdlIiwidG90YWwiLCJyZWNlaXZlZCIsImxpc3ROZXR3b3JrcyIsIm91dCIsInNlYXJjaCIsIm9yZGVyIiwiYXJyIiwiZGF0YSIsInJlc3VsdCIsIm4iLCJwdXNoIiwibmV0d29ya05hbWUiLCJsaXN0QVBzQnlOZXR3b3JrIiwibmlkIiwibmV0d29ya0lkIiwiZmlsdGVyIiwic2hvd1R5cGUiLCJhcE5hbWUiLCJuYW1lIiwibGlzdEFsbEFwcyIsIm5ldHMiLCJhbGwiLCJhcHMiLCJzZWVuIiwiU2V0IiwiZGVkdXAiLCJoYXMiLCJhZGQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./services/gdms.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&page=%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fgdms%2Fsync%2Froute.ts&appDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjeferson.oliveira%5CDocuments%5CGitHub%5Cmonitoring_grandstream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();